<nav role="navigation" aria-label="Main navigation" class="{{ if not .IsHome }}with-breadcrumbs{{ else }}no-breadcrumbs{{ end }}">
    <div class="container nav-container">
        <!-- Top Row: Logo, Menu Toggle, and Language Switcher -->
        <div class="nav-top">
            <a href="{{ .Site.Home.RelPermalink }}" class="logo" aria-label="{{ .Site.Title }} - Home">{{ .Site.Params.logo | default "Le'Onyx" }}</a>
            
            <button class="menu-toggle" id="menu-toggle" aria-expanded="false" aria-controls="nav-modal" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
                <span class="hamburger"></span>
                <span class="hamburger"></span>
            </button>

            <div class="lang-switcher" role="group" aria-label="Language selection">
                <button class="lang-icon-toggle" id="lang-toggle" aria-expanded="false" aria-label="Language menu">
                    <svg class="lang-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="2" y1="12" x2="22" y2="12"></line>
                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                    </svg>
                </button>
                <div class="lang-dropdown" id="lang-dropdown">
                    {{ range .Site.Languages }}
                    {{- $langPrefix := "" -}}
                    {{- if ne .Lang "es" -}}
                        {{- $langPrefix = printf "/%s" .Lang -}}
                    {{- end -}}
                    <a href="{{ $.Site.BaseURL }}{{ $langPrefix | strings.TrimPrefix "/" }}" 
                       class="lang-link {{ if eq .Lang $.Site.Language.Lang }}active{{ end }}" 
                       aria-label="Switch to {{ .LanguageName }}" 
                       {{ if eq .Lang $.Site.Language.Lang }}aria-current="true"{{ end }}>
                        {{- if eq .Lang "es" -}}ðŸ‡ªðŸ‡¸ EspaÃ±ol{{- else if eq .Lang "en" -}}ðŸ‡ºðŸ‡¸ English{{- else if eq .Lang "fr" -}}ðŸ‡«ðŸ‡· FranÃ§ais{{- else -}}{{ .Lang | upper }}{{- end -}}
                    </a>
                    {{ end }}
                </div>
            </div>
        </div>
        
        {{ if not .IsHome }}
        <!-- Bottom Row: Breadcrumbs -->
        <div class="nav-breadcrumbs">
            {{- $langPrefix := "" -}}
            {{- if ne .Site.Language.Lang "es" -}}
                {{- $langPrefix = printf "/%s" .Site.Language.Lang -}}
            {{- end -}}
            
            <a href="{{ .Site.Home.RelPermalink }}" class="breadcrumb-link">{{ i18n "home" | default "Inicio" }}</a>
            
            {{ if .Section }}
                <span class="breadcrumb-separator">/</span>
                <a href="{{ .Site.BaseURL }}{{ $langPrefix | strings.TrimPrefix "/" }}/{{ .Section }}/" class="breadcrumb-link">
                    {{ if eq .Section "about" }}{{ i18n "about" | default "Sobre mÃ­" }}
                    {{ else if eq .Section "statement" }}{{ i18n "statement" | default "DeclaraciÃ³n" }}
                    {{ else if eq .Section "portfolio" }}{{ i18n "portfolio" | default "Trabajos" }}
                    {{ else if eq .Section "contact" }}{{ i18n "contact" | default "Contacto" }}
                    {{ else if eq .Section "posts" }}{{ i18n "blog" | default "Blog" }}
                    {{ else }}{{ .Section | title }}{{ end }}
                </a>
            {{ end }}
            
            {{ if .IsPage }}
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-current">{{ .Title }}</span>
            {{ end }}
        </div>
        {{ end }}
    </div>
</nav>

<!-- Navigation Modal -->
<div class="nav-modal" id="nav-modal" aria-hidden="true">
    <div class="nav-modal-overlay" id="nav-modal-overlay"></div>
    <div class="nav-modal-content">
        <button class="nav-modal-close" id="nav-modal-close" aria-label="Close menu">&times;</button>
        
        <div class="giant-nav">
            {{- $langPrefix := "" -}}
            {{- if ne .Site.Language.Lang "es" -}}
                {{- $langPrefix = printf "/%s" .Site.Language.Lang -}}
            {{- end -}}
            <div class="giant-nav-left">
                <a href="{{ .Site.BaseURL }}{{ $langPrefix | strings.TrimPrefix "/" }}/about/" class="giant-nav-link" aria-current="false">{{ i18n "about" | upper }}</a>
                <a href="{{ .Site.BaseURL }}{{ $langPrefix | strings.TrimPrefix "/" }}/statement/" class="giant-nav-link" aria-current="false">{{ i18n "statement" | upper }}</a>
            </div>
            <div class="giant-nav-right">
                <a href="{{ .Site.BaseURL }}{{ $langPrefix | strings.TrimPrefix "/" }}/portfolio/" class="giant-nav-link" aria-current="false">{{ i18n "portfolio" | upper }}</a>
                <a href="{{ .Site.BaseURL }}{{ $langPrefix | strings.TrimPrefix "/" }}/contact/" class="giant-nav-link" aria-current="false">{{ i18n "contact" | upper }}</a>
            </div>
        </div>
    </div>
</div>